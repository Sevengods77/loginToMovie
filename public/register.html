<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sign Up â€“ NETMOVIE</title>
  <meta name="description" content="Create your NETMOVIE account and start streaming unlimited movies and shows." />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Anton&family=Inter:wght@300;400;500;600;700;800;900&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>

<body class="auth-page scrollable">

  <!-- â•â• Glassmorphic Scene â•â• -->
  <div class="scene">
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>
    <div class="orb orb-4"></div>
    <div class="orb orb-5"></div>
  </div>

  <!-- Red film strip at bottom -->
  <div class="film-strip"></div>

  <!-- NETMOVIE Brand Header -->
  <header class="brand">
    <div class="brand-logo"><span class="logo-n">N</span>ETMOVIE</div>
  </header>

  <!-- Main Page -->
  <main class="page-wrapper">
    <div class="card" id="mainCard">

      <!-- Card Header -->
      <div class="card-header">
        <h1 class="card-title">Create Account</h1>
        <p class="card-subtitle">Join NETMOVIE â€” Stream anything, anytime</p>
      </div>

      <!-- Register Form -->
      <form id="registerForm" class="form" novalidate>

        <!-- User ID + Full Name (2 columns) -->
        <div class="form-row">
          <div class="form-group" id="group-user_id">
            <label class="form-label" for="user_id">
              <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="2" y="5" width="20" height="14" rx="2" />
                <line x1="2" y1="10" x2="22" y2="10" />
              </svg>
              User ID
            </label>
            <input type="text" id="user_id" name="user_id" class="form-input" placeholder="e.g. netm01"
              autocomplete="off" required />
            <span class="field-error" id="err-user_id"></span>
          </div>

          <div class="form-group" id="group-user_name">
            <label class="form-label" for="user_name">
              <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="8" r="4" />
                <path d="M4 20c0-4 3.6-7 8-7s8 3 8 7" />
              </svg>
              Full Name
            </label>
            <input type="text" id="user_name" name="user_name" class="form-input" placeholder="e.g. Omkar"
              autocomplete="name" required />
            <span class="field-error" id="err-user_name"></span>
          </div>
        </div>

        <!-- Email -->
        <div class="form-group" id="group-email">
          <label class="form-label" for="email">
            <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" />
              <polyline points="22,6 12,13 2,6" />
            </svg>
            Email Address
          </label>
          <input type="email" id="email" name="email" class="form-input" placeholder="you@example.com"
            autocomplete="email" required />
          <span class="field-error" id="err-email"></span>
        </div>

        <!-- Phone -->
        <div class="form-group" id="group-phone">
          <label class="form-label" for="phone">
            <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
              <path
                d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07A19.5 19.5 0 0 1 4.69 12 19.79 19.79 0 0 1 1.61 3.44 2 2 0 0 1 3.6 1.27h3a2 2 0 0 1 2 1.72c.12.96.36 1.9.69 2.81a2 2 0 0 1-.45 2.11L7.91 9a16 16 0 0 0 6.08 6.08l1.8-1.8a2 2 0 0 1 2.11-.46c.9.33 1.85.57 2.81.69A2 2 0 0 1 22 16.92z" />
            </svg>
            Phone Number
          </label>
          <input type="tel" id="phone" name="phone" class="form-input" placeholder="10-digit number" autocomplete="tel"
            maxlength="10" required />
          <span class="field-error" id="err-phone"></span>
        </div>

        <!-- Password -->
        <div class="form-group" id="group-password">
          <label class="form-label" for="password">
            <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="11" width="18" height="11" rx="2" />
              <path d="M7 11V7a5 5 0 0 1 10 0v4" />
            </svg>
            Password
          </label>
          <div class="input-wrapper">
            <input type="password" id="password" name="password" class="form-input" placeholder="Min. 6 characters"
              autocomplete="new-password" required />
            <button type="button" class="toggle-pw" id="togglePw" aria-label="Toggle password visibility">
              <svg id="eyeIcon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
                <circle cx="12" cy="12" r="3" />
              </svg>
            </button>
          </div>
          <div class="strength-bar-wrap">
            <div class="strength-bar" id="strengthBar"></div>
          </div>
          <span class="strength-label" id="strengthLabel"></span>
          <span class="field-error" id="err-password"></span>
        </div>

        <!-- Alert -->
        <div class="alert" id="formAlert" style="display:none;"></div>

        <!-- Submit -->
        <button type="submit" class="btn-primary" id="submitBtn">
          <span class="btn-text">Create Account</span>
          <span class="btn-loader" id="btnLoader">
            <span class="spinner"></span> Creating account...
          </span>
        </button>
      </form>

      <!-- Card Footer -->
      <div class="card-footer">
        Already have an account? <a href="/login" class="link">Sign in here</a>
      </div>

    </div>
  </main>

  <footer class="page-footer">Â© 2026 NETMOVIE. All rights reserved.</footer>

  <script>
    // â”€â”€ Password Strength â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const pwInput = document.getElementById('password');
    document.getElementById('password').addEventListener('input', () => {
      const val = pwInput.value;
      let score = 0;
      if (val.length >= 6) score++;
      if (val.length >= 10) score++;
      if (/[A-Z]/.test(val)) score++;
      if (/[0-9]/.test(val)) score++;
      if (/[^A-Za-z0-9]/.test(val)) score++;

      const levels = ['', 'Weak', 'Fair', 'Good', 'Strong', 'Very Strong'];
      const colors = ['', '#ef4444', '#f97316', '#eab308', '#22c55e', '#10b981'];
      const widths = ['0%', '20%', '40%', '60%', '80%', '100%'];

      const bar = document.getElementById('strengthBar');
      const label = document.getElementById('strengthLabel');
      bar.style.width = val.length > 0 ? widths[score] : '0%';
      bar.style.background = val.length > 0 ? colors[score] : 'transparent';
      label.textContent = val.length > 0 ? levels[score] : '';
      label.style.color = val.length > 0 ? colors[score] : '';
    });

    // â”€â”€ Toggle Password â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const eyeIcon = document.getElementById('eyeIcon');
    document.getElementById('togglePw').addEventListener('click', () => {
      const isHidden = pwInput.type === 'password';
      pwInput.type = isHidden ? 'text' : 'password';
      eyeIcon.innerHTML = isHidden
        ? '<path d="M17.94 17.94A10 10 0 0 1 12 20c-7 0-11-8-11-8a18 18 0 0 1 5.06-5.94"/><path d="M9.9 4.24A9 9 0 0 1 12 4c7 0 11 8 11 8a18 18 0 0 1-2.16 3.19"/><line x1="1" y1="1" x2="23" y2="23"/>'
        : '<path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/>';
    });

    // â”€â”€ Phone: digits only â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.getElementById('phone').addEventListener('input', e => {
      e.target.value = e.target.value.replace(/\D/g, '');
    });

    // â”€â”€ Form Submit â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.getElementById('registerForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      clearErrors();

      const user_id = document.getElementById('user_id').value.trim();
      const user_name = document.getElementById('user_name').value.trim();
      const email = document.getElementById('email').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const password = document.getElementById('password').value;

      let valid = true;
      if (!user_id) { showError('user_id', 'User ID is required.'); valid = false; }
      if (!user_name) { showError('user_name', 'Full name is required.'); valid = false; }
      if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        showError('email', 'Enter a valid email address.'); valid = false;
      }
      if (!phone || !/^[0-9]{10}$/.test(phone)) {
        showError('phone', 'Enter a valid 10-digit phone number.'); valid = false;
      }
      if (!password || password.length < 6) {
        showError('password', 'Password must be at least 6 characters.'); valid = false;
      }
      if (!valid) return;

      setLoading(true);
      try {
        const res = await fetch('/api/register', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ user_id, user_name, email, phone, password })
        });
        const data = await res.json();

        if (data.success) {
          showAlert('ðŸŽ‰ ' + data.message, 'success');
          setTimeout(() => { window.location.href = '/login'; }, 2200);
        } else {
          showAlert(data.message, 'error');
          document.getElementById('mainCard').classList.add('shake');
          setTimeout(() => document.getElementById('mainCard').classList.remove('shake'), 600);
        }
      } catch {
        showAlert('Network error. Please check your connection.', 'error');
      } finally {
        setLoading(false);
      }
    });

    function clearErrors() {
      document.querySelectorAll('.field-error').forEach(el => el.textContent = '');
      document.querySelectorAll('.form-input').forEach(el => el.classList.remove('input-error'));
      document.getElementById('formAlert').style.display = 'none';
    }
    function showError(id, msg) {
      document.getElementById(`err-${id}`).textContent = msg;
      document.getElementById(id).classList.add('input-error');
    }
    function showAlert(msg, type) {
      const a = document.getElementById('formAlert');
      a.textContent = msg; a.className = `alert alert-${type}`; a.style.display = 'block';
    }
    function setLoading(on) {
      const btn = document.getElementById('submitBtn');
      btn.disabled = on;
      btn.querySelector('.btn-text').style.display = on ? 'none' : 'inline';
      document.getElementById('btnLoader').style.display = on ? 'flex' : 'none';
    }
  </script>
</body>

</html>